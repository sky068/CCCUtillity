{"version":3,"sources":["SpinePartialSkin.js"],"names":["cc","Class","extends","Component","properties","taotao","sp","Skeleton","tailGroup","Node","start","initSkin","tailTag","tailName","onTailBeSelected","toggle","getChildByName","getComponent","Toggle","isChecked","target","data","log","changePartialCloth","skeleton","slotName","targetSkinName","targetAttaName","console","slot","findSlot","skeletonData","getRuntimeData","skin","findSkin","slotIndex","findSlotIndex","atta","getAttachment","setAttachment"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAQC,GAAGC,QADH;AAERC,mBAAWR,GAAGS;AAFN,KAHP;;AAQL;;AAEA;;AAEAC,SAZK,mBAYI;AACL,aAAKC,QAAL;AACH,KAdI;AAgBLA,YAhBK,sBAgBO;AACR;AACA,YAAIC,UAAU,CAAd;AACA,YAAIC,WAAW,eAAeD,WAAW,CAAX,GAAgB,MAAMA,OAAtB,GAAiC,EAAhD,CAAf;AACA,aAAKE,gBAAL,CAAsB,IAAtB,EAA4BD,QAA5B;;AAEA,YAAIE,SAAS,KAAKP,SAAL,CAAeQ,cAAf,CAA8B,WAASJ,OAAvC,EAAgDK,YAAhD,CAA6DjB,GAAGkB,MAAhE,CAAb;AACAH,eAAOI,SAAP,GAAmB,IAAnB;AACH,KAxBI;AA0BLL,oBA1BK,4BA0BaM,MA1Bb,EA0BqBC,IA1BrB,EA0B2B;AAC5BrB,WAAGsB,GAAH,CAAO,OAAP,EAAgBD,IAAhB;AACA,aAAKE,kBAAL,CAAwB,KAAKlB,MAA7B,EAAqC,WAArC,EAAkD,SAAlD,EAA6DgB,IAA7D;;AAEA,YAAID,MAAJ,EAAY;AACR;AACH;AACJ,KAjCI;;;AAmCL;AACAG,sBApCK,8BAoCcC,QApCd,EAoCwBC,QApCxB,EAoCkCC,cApClC,EAoCkDC,cApClD,EAoCiE;AAClEC,gBAAQN,GAAR,CAAY,eAAZ,EAA6BG,QAA7B,EAAuCC,cAAvC,EAAuDC,cAAvD;AACA,YAAME,OAAOL,SAASM,QAAT,CAAkBL,QAAlB,CAAb;AACA,YAAMM,eAAeP,SAASO,YAAT,CAAsBC,cAAtB,EAArB;AACA,YAAMC,OAAOF,aAAaG,QAAb,CAAsBR,cAAtB,CAAb;AACA,YAAMS,YAAYJ,aAAaK,aAAb,CAA2BX,QAA3B,CAAlB;AACA,YAAMY,OAAOJ,KAAKK,aAAL,CAAmBH,SAAnB,EAA8BR,cAA9B,CAAb;AACAE,aAAKU,aAAL,CAAmBF,IAAnB;AACH;AA5CI;;AA+CL;AA/CJ","file":"SpinePartialSkin.js","sourceRoot":"../../../../assets/Script","sourcesContent":["/**\n * Created by xujiawei on 2020-03-13 19:53:30\n */\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        taotao: sp.Skeleton,\n        tailGroup: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this.initSkin();\n    },\n\n    initSkin () {\n        // todo: 根据保存的数据初始化皮肤\n        let tailTag = 1;\n        let tailName = 'weiba-zhi' + (tailTag != 1 ? ('-' + tailTag) : '');\n        this.onTailBeSelected(null, tailName);\n\n        let toggle = this.tailGroup.getChildByName('toggle'+tailTag).getComponent(cc.Toggle);\n        toggle.isChecked = true;\n    },\n\n    onTailBeSelected (target, data) {\n        cc.log('tail:', data);\n        this.changePartialCloth(this.taotao, 'weiba-zhi', 'default', data);\n\n        if (target) {\n            // zy.audio.playEffect(zy.audio.Effect.CommonClick);\n        }\n    },\n\n    // 局部换装\n    changePartialCloth(skeleton, slotName, targetSkinName, targetAttaName){\n        console.log('change cloth:', slotName, targetSkinName, targetAttaName);\n        const slot = skeleton.findSlot(slotName);\n        const skeletonData = skeleton.skeletonData.getRuntimeData();\n        const skin = skeletonData.findSkin(targetSkinName);\n        const slotIndex = skeletonData.findSlotIndex(slotName);\n        const atta = skin.getAttachment(slotIndex, targetAttaName);\n        slot.setAttachment(atta);\n    },\n\n\n    // update (dt) {},\n});\n"]}